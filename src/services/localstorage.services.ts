
const sesson = [
    {
        "access_token": "eyJhbGciOiJIUzI1NiIsImtpZCI6IjZzcVRFdnA5akl5dmR1aUMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2J2emp0dHp2c3Jpd21kb2tkdXBwLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI3ODc0NmZhNC0wNjY4LTQ3Y2UtODJiOS01NmM2MDVmMjkzNTkiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzM4Njg0NDk1LCJpYXQiOjE3Mzg2ODA4OTUsImVtYWlsIjoibmljby5jb250aWdsaWFuaUBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImVtYWlsIjoibmljby5jb250aWdsaWFuaUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGhvbmVfdmVyaWZpZWQiOmZhbHNlLCJzdWIiOiI3ODc0NmZhNC0wNjY4LTQ3Y2UtODJiOS01NmM2MDVmMjkzNTkifSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJwYXNzd29yZCIsInRpbWVzdGFtcCI6MTczODY4MDg5NX1dLCJzZXNzaW9uX2lkIjoiMzExMDc4YzAtY2NiNy00YmFkLTk3NTEtY2E0MjhhN2Y1NmYwIiwiaXNfYW5vbnltb3VzIjpmYWxzZX0.7RFkR1rz1GEDZJ3OpGIK1QjiYjYAX37NAwvRBwEqsIw",
        "token_type": "bearer",
        "expires_in": 3600,
        "expires_at": 1738684495,
        "refresh_token": "ew8KOWJhOPaQXO9Olp2SCQ",
        "user": {
            "id": "78746fa4-0668-47ce-82b9-56c605f29359",
            "aud": "authenticated",
            "role": "authenticated",
            "email": "nico.contigliani@gmail.com",
            "email_confirmed_at": "2025-01-27T20:50:56.045647Z",
            "phone": "",
            "confirmation_sent_at": "2025-01-27T20:49:14.463741Z",
            "confirmed_at": "2025-01-27T20:50:56.045647Z",
            "last_sign_in_at": "2025-02-04T14:54:55.057686227Z",
            "app_metadata": {
                "provider": "email",
                "providers": [
                    "email"
                ]
            },
            "user_metadata": {
                "email": "nico.contigliani@gmail.com",
                "email_verified": true,
                "phone_verified": false,
                "sub": "78746fa4-0668-47ce-82b9-56c605f29359"
            },
            "identities": [
                {
                    "identity_id": "a0d3d4d0-82f0-4300-84ba-eca9e2624c94",
                    "id": "78746fa4-0668-47ce-82b9-56c605f29359",
                    "user_id": "78746fa4-0668-47ce-82b9-56c605f29359",
                    "identity_data": {
                        "email": "nico.contigliani@gmail.com",
                        "email_verified": true,
                        "phone_verified": false,
                        "sub": "78746fa4-0668-47ce-82b9-56c605f29359"
                    },
                    "provider": "email",
                    "last_sign_in_at": "2025-01-27T20:49:14.460008Z",
                    "created_at": "2025-01-27T20:49:14.460057Z",
                    "updated_at": "2025-01-27T20:49:14.460057Z",
                    "email": "nico.contigliani@gmail.com"
                }
            ],
            "created_at": "2025-01-27T20:49:14.453146Z",
            "updated_at": "2025-02-04T14:54:55.061021Z",
            "is_anonymous": false
        }
    }
]

const user = [
    {
        "id": "78746fa4-0668-47ce-82b9-56c605f29359",
        "aud": "authenticated",
        "role": "authenticated",
        "email": "nico.contigliani@gmail.com",
        "email_confirmed_at": "2025-01-27T20:50:56.045647Z",
        "phone": "",
        "confirmation_sent_at": "2025-01-27T20:49:14.463741Z",
        "confirmed_at": "2025-01-27T20:50:56.045647Z",
        "last_sign_in_at": "2025-02-04T14:54:55.057686227Z",
        "app_metadata": {
            "provider": "email",
            "providers": [
                "email"
            ]
        },
        "user_metadata": {
            "email": "nico.contigliani@gmail.com",
            "email_verified": true,
            "phone_verified": false,
            "sub": "78746fa4-0668-47ce-82b9-56c605f29359"
        },
        "identities": [
            {
                "identity_id": "a0d3d4d0-82f0-4300-84ba-eca9e2624c94",
                "id": "78746fa4-0668-47ce-82b9-56c605f29359",
                "user_id": "78746fa4-0668-47ce-82b9-56c605f29359",
                "identity_data": {
                    "email": "nico.contigliani@gmail.com",
                    "email_verified": true,
                    "phone_verified": false,
                    "sub": "78746fa4-0668-47ce-82b9-56c605f29359"
                },
                "provider": "email",
                "last_sign_in_at": "2025-01-27T20:49:14.460008Z",
                "created_at": "2025-01-27T20:49:14.460057Z",
                "updated_at": "2025-01-27T20:49:14.460057Z",
                "email": "nico.contigliani@gmail.com"
            }
        ],
        "created_at": "2025-01-27T20:49:14.453146Z",
        "updated_at": "2025-02-04T14:54:55.061021Z",
        "is_anonymous": false
    }
]
export const localhostStorage = (data: any) => {

    if (data && data.session?.access_token) {
        const { 
            session: { access_token, expires_at, refresh_token }, 
            user: { id: userid, email,aud } 
        } = data;
        
        // Guardar en localStorage
        localStorage.setItem("access_token", access_token);
        localStorage.setItem("expires_at", expires_at.toString()); // Asegurar que sea string
        localStorage.setItem("refresh_token", refresh_token);
        localStorage.setItem("userid", userid);
        localStorage.setItem("email", email);
        localStorage.setItem("aud", aud);

    }
};


export const getLocalhostStorage = () => {
    return {
        access_token: localStorage.getItem("access_token"),
        expires_at: localStorage.getItem("expires_at"), // Si necesitas convertirlo en nÃºmero: Number(localStorage.getItem("expires_at"))
        refresh_token: localStorage.getItem("refresh_token"),
        userid: localStorage.getItem("userid"),
        email: localStorage.getItem("email"),
        aud: localStorage.getItem("aud"),
    };
};


export const clearLocalhostStorage = () => {
    localStorage.removeItem("access_token");
    localStorage.removeItem("expires_at");
    localStorage.removeItem("refresh_token");
    localStorage.removeItem("userid");
    localStorage.removeItem("email");
    localStorage.removeItem("aud");
};